<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>How to obtain a traffic model for VoIP? | Luis Sequeira</title> <meta name="author" content="Luis Sequeira"> <meta name="description" content="In this article, we describe how to obtain a traffic model for VoIP which is quite easy to interpret and it provides some of the things that must be done."> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.svg?8510505313e2319b2bf6e43135ea852b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://luissequeira.github.io/blog/2014/how-to-obtain-a-traffic-model-for-voip/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Luis Sequeira</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="nav-item active"> <a class="nav-link" href="/es/blog/2014/how-to-obtain-a-traffic-model-for-voip/">ES</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">How to obtain a traffic model for VoIP?</h1> <p class="post-meta"> March 03, 2014 </p> <p class="post-tags"> <a href="/blog/2014"> <i class="fas fa-calendar fa-sm"></i> 2014 </a>   ·   <a href="/blog/tag/traffic"> <i class="fas fa-hashtag fa-sm"></i> traffic</a>   <a href="/blog/tag/voip"> <i class="fas fa-hashtag fa-sm"></i> voip</a>   <a href="/blog/tag/multimedia"> <i class="fas fa-hashtag fa-sm"></i> multimedia</a>     ·   <a href="/blog/category/networks"> <i class="fas fa-tag fa-sm"></i> Networks</a>   <a href="/blog/category/innovation"> <i class="fas fa-tag fa-sm"></i> Innovation</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>In order to perform estimations of a traffic model for multimedia flows, it is necessary for the researcher to have precise control of the test environment, minimizing errors and interference that may occur, leaving a test scenario that allows a smooth development to the application to be modeled. <strong>As an example, we have selected a <a href="/blog/2014/what-is-voip/">VoIP</a> traffic</strong> which is quite easy to interpret and it provides some of the things that must be done.</p> <h2 id="scenario-for-testing">Scenario for testing</h2> <p><strong>Figure #1 shows the diagram used for testing in order to obtain the pattern of traffic on the transmission of voice over IP is shown</strong>. In this case, we use a voice over IP gateway <em>Linksys SPA 3102</em>, with the aim of connecting a conventional telephone system with an IP network. A sniffer can capture traffic using the network for later analysis.</p> <div class="row mt-3" style="text-align: center"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/Research/como-obtener-modelo-trafico-voip/1-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/Research/como-obtener-modelo-trafico-voip/1-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/Research/como-obtener-modelo-trafico-voip/1-1400.webp"></source> <img src="/assets/img/Research/como-obtener-modelo-trafico-voip/1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure #1: Scenario used to determine the voice traffic. </div> <h2 id="procedure">Procedure</h2> <p><strong>First, we must configure the gateway</strong>, this can be done with relative ease by an IVR (Interative Voice Response) menu or through any Internet browser. The most relevant aspects of the configuration are the use of SIP (Session Initiation Protocol) as the signaling protocol, assigning IP addresses to each gateway and disabling NAT (Network Address Translation). For audio settings: the G.729 codec is used, a packetization of two samples per packet and no silence suppression is performed.&lt;</p> <p><strong>After the equipment configuration, a sniffer is launched</strong> in order to make the traffic captures, <strong>subsequently a call between terminals is made</strong>. Packet capture is performed by sniffer, while the call is in progress and the data is stored for later analysis.</p> <h2 id="voip-model">VoIP model</h2> <p>If we analyze the captured trace, with any of the recommended <a href="/blog/2013/the-2-best-tools-for-the-capture-and-the-interpretation-of-network-data/">tools for the capture and the interpretation of network data</a>, <strong>we can reconstruct the headers distribution of each captured packet</strong> and thus deduce the Figure #2.</p> <div class="row mt-3" style="text-align: center"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/Research/como-obtener-modelo-trafico-voip/2_en-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/Research/como-obtener-modelo-trafico-voip/2_en-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/Research/como-obtener-modelo-trafico-voip/2_en-1400.webp"></source> <img src="/assets/img/Research/como-obtener-modelo-trafico-voip/2_en.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure #2: Header description for each packet for voice traffic. </div> <p>As we can be seen, <strong>VoIP uses RTP (Real-Time Transport Protocol) for transmitting data in real time and this is transported by UDP</strong>, Figure #2 allows checking the use of those protocols. <strong>We also highlight in the analysis of packet capture, that the transmission of each packet has a constant distribution (no packet bursts)</strong>. In addition, we confirm that each terminal sends packets every \(20 ms\) and the data content in packets corresponds to the type of used codec (G.729) and the number of defined samples in the configuration for each gateway (two samples per packet).</p> <p>An important aspect to consider for a traffic model is time, or variation thereof, in which each packet is forwarded. This requires to extract from trace file, the time between the beginning (or arrivals) of each packet. Figure #3 shows the variation in the duration of each packet, for the sent and received voice traffic, based on the transmission time. <strong>For samples taken in this case, an average inter-packet time of \(20 ms\) with a standard deviation of \(0.62 ms\) was obtained. Each voice connection has a bandwidth consumption, on IP level of \(BW = (60x8) / 20X10^{-3}\), which corresponds to \(24 Kbps\)</strong>.</p> <div class="row mt-3" style="text-align: center"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/Research/como-obtener-modelo-trafico-voip/3_en-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/Research/como-obtener-modelo-trafico-voip/3_en-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/Research/como-obtener-modelo-trafico-voip/3_en-1400.webp"></source> <img src="/assets/img/Research/como-obtener-modelo-trafico-voip/3_en.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure #3: Time detail between the beginnings of each packet for voice traffic. </div> <h2 id="conclusion">Conclusion</h2> <p>The voice transmission model is relatively simple and stable in terms of time and size because <strong>no burst behavior is detected, or it can be consider as only one. Generating this type of IP flow, consists on the sending of 60-byte packets (including headers) every \(20 ms\) with a standard deviation of \(0.62 ms\), this if the G.729 codec and a packetization of two samples are used</strong>. In the case, where the change of codec or the number of samples per packet is required, the changes are simple to make. For this, we must take into account the sampling frequency defined by the new used codec and the amount of samples that we want to package which would be included after the RTP header.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2014/what-is-voip/">What is VoIP?</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2013/quality-of-service-end-to-end-in-femto-cells-environments/">Quality of Service end-to-end in femto-cells environments</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2013/architecture-features-lte-sae/">Architecture Features LTE / SAE</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2013/the-2-best-tools-for-the-capture-and-the-interpretation-of-network-data/">The 2 best tools for the capture and the interpretation of network data</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2013/traffic-generators/">Traffic Generators</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Luis Sequeira. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>